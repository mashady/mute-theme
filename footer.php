<footer class="w-full">
        <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
            <!--Grid-->
            <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-3 md:gap-8 py-10 max-sm:max-w-sm max-sm:mx-auto gap-y-8">
                <div class="col-span-full mb-10 lg:col-span-2 lg:mb-0">
                    <a href=""  class="flex justify-center lg:justify-start">
                        <svg class="w-40 h-8" viewBox="0 0 164 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- SVG content omitted for brevity -->
                        </svg>
                    </a>
                    <p class="py-8 text-sm text-gray-500 lg:max-w-xs text-center lg:text-left">Trusted in more than 100 countries & 5 million customers. Have any query ?</p>
                    <a href="/contact-us/"  class="py-2.5 px-5 h-9 block w-fit bg-indigo-600 rounded-full shadow-sm text-xs text-white mx-auto transition-all  duration-500 hover:bg-indigo-700 lg:mx-0">
                        Contact us
                    </a>
                </div>
                <!--End Col-->
                <div class="lg:mx-auto text-left ">
                    <h4 class="text-lg text-gray-900 font-medium mb-7">Shop</h4>
                    <div class="flex flex-col transition-all duration-500">
                        <a href="/shop/acoustic-products/" class="mb-6 text-gray-600 hover:text-gray-900">Acoustic Products</a>
                        <a href="/shop/isolation-products/" class="mb-6 text-gray-600 hover:text-gray-900">Isolation Products</a>
                        <a href="/shop/studio-solutions/" class="mb-6 text-gray-600 hover:text-gray-900">Studio Solutions</a>
                        <a href="/shop/microphones/" class="mb-6 text-gray-600 hover:text-gray-900">Microphones</a>
                        <a href="/shop/cameras/" class="text-gray-600 hover:text-gray-900">Cameras</a>
                    </div>
                </div>
                <!--End Col-->
                <div class="lg:mx-auto text-left ">
                    <h4 class="text-lg text-gray-900 font-medium mb-7">Blogs</h4>
                    <div class="flex flex-col transition-all duration-500">
                        <a href="/category/uncategorized/" class="mb-6 text-gray-600 hover:text-gray-900">Uncategorized</a>
                    </div>
                </div>
                <!--End Col-->
                <!-- removed duplicate Blogs column -->
            </div>
            <!--Grid-->
            <div class="py-7 border-t border-gray-200">
                <div class="flex items-center justify-center flex-col lg:justify-between lg:flex-row">
                    <span class="text-sm text-gray-500 ">©<a href="https://soundmute.com/">sound mute</a> 2024, All rights reserved.</span>
                    <div class="flex mt-4 space-x-4 sm:justify-center lg:mt-0 ">
                        <a href="javascript:;"  class="w-9 h-9 rounded-full bg-gray-700 flex justify-center items-center hover:bg-indigo-600">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <g id="Social Media">
                            <path id="Vector" d="M11.3214 8.93666L16.4919 3.05566H15.2667L10.7772 8.16205L7.1914 3.05566H3.05566L8.47803 10.7774L3.05566 16.9446H4.28097L9.022 11.552L12.8088 16.9446H16.9446L11.3211 8.93666H11.3214ZM9.64322 10.8455L9.09382 10.0765L4.72246 3.95821H6.60445L10.1322 8.8959L10.6816 9.66481L15.2672 16.083H13.3852L9.64322 10.8458V10.8455Z" fill="white"/>
                            </g>
                          </svg>
                        </a>
                        <a href="javascript:;"  class="w-9 h-9 rounded-full bg-gray-700 flex justify-center items-center hover:bg-indigo-600">
                            <svg class="w-[1.25rem] h-[1.125rem] text-white" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4.70975 7.93663C4.70975 6.65824 5.76102 5.62163 7.0582 5.62163C8.35537 5.62163 9.40721 6.65824 9.40721 7.93663C9.40721 9.21502 8.35537 10.2516 7.0582 10.2516C5.76102 10.2516 4.70975 9.21502 4.70975 7.93663ZM3.43991 7.93663C3.43991 9.90608 5.05982 11.5025 7.0582 11.5025C9.05658 11.5025 10.6765 9.90608 10.6765 7.93663C10.6765 5.96719 9.05658 4.37074 7.0582 4.37074C5.05982 4.37074 3.43991 5.96719 3.43991 7.93663ZM9.97414 4.22935C9.97408 4.39417 10.0236 4.55531 10.1165 4.69239C10.2093 4.82946 10.3413 4.93633 10.4958 4.99946C10.6503 5.06259 10.8203 5.07916 10.9844 5.04707C11.1484 5.01498 11.2991 4.93568 11.4174 4.81918C11.5357 4.70268 11.6163 4.55423 11.649 4.39259C11.6817 4.23095 11.665 4.06339 11.6011 3.91109C11.5371 3.7588 11.4288 3.6286 11.2898 3.53698C11.1508 3.44536 10.9873 3.39642 10.8201 3.39635H10.8197C10.5955 3.39646 10.3806 3.48424 10.222 3.64043C10.0635 3.79661 9.97434 4.00843 9.97414 4.22935ZM4.21142 13.5892C3.52442 13.5584 3.15101 13.4456 2.90286 13.3504C2.57387 13.2241 2.33914 13.0738 2.09235 12.8309C1.84555 12.588 1.69278 12.3569 1.56527 12.0327C1.46854 11.7882 1.3541 11.4201 1.32287 10.7431C1.28871 10.0111 1.28189 9.79119 1.28189 7.93669C1.28189 6.08219 1.28927 5.86291 1.32287 5.1303C1.35416 4.45324 1.46944 4.08585 1.56527 3.84069C1.69335 3.51647 1.84589 3.28513 2.09235 3.04191C2.3388 2.79869 2.57331 2.64813 2.90286 2.52247C3.1509 2.42713 3.52442 2.31435 4.21142 2.28358C4.95417 2.24991 5.17729 2.24319 7.0582 2.24319C8.9391 2.24319 9.16244 2.25047 9.90582 2.28358C10.5928 2.31441 10.9656 2.42802 11.2144 2.52247C11.5434 2.64813 11.7781 2.79902 12.0249 3.04191C12.2717 3.2848 12.4239 3.51647 12.552 3.84069C12.6487 4.08513 12.7631 4.45324 12.7944 5.1303C12.8285 5.86291 12.8354 6.08219 12.8354 7.93669C12.8354 9.79119 12.8285 10.0105 12.7944 10.7431C12.7631 11.4201 12.6481 11.7881 12.552 12.0327C12.4239 12.3569 12.2714 12.5882 12.0249 12.8309C11.7784 13.0736 11.5434 13.2241 11.2144 13.3504C10.9663 13.4457 10.5928 13.5585 9.90582 13.5892C9.16306 13.6229 8.93994 13.6296 7.0582 13.6296C5.17645 13.6296 4.95395 13.6229 4.15307 13.5892ZM4.15307 1.03424C3.40294 1.06791 2.89035 1.18513 2.4427 1.3568C1.9791 1.53408 1.58663 1.77191 1.19446 2.1578C0.802277 2.54369 0.56157 2.93108 0.381687 3.38797C0.207498 3.82941 0.0885535 4.3343 0.0543922 5.07358C0.0196672 5.81402 0.0117188 6.05074 0.0117188 7.93663C0.0117188 9.82252 0.0196672 10.0592 0.0543922 10.7997C0.0885535 11.539 0.207498 12.0439 0.381687 12.4853C0.56157 12.9419 0.802334 13.3297 1.19446 13.7155C1.58658 14.1012 1.9791 14.3387 2.4427 14.5165C2.89119 14.6881 3.40294 14.8054 4.15307 14.839C4.90479 14.8727 5.1446 14.8811 7.0582 14.8811C8.9718 14.8811 9.212 14.8732 9.96332 14.839C10.7135 14.8054 11.2258 14.6881 11.6737 14.5165C12.137 14.3387 12.5298 14.1014 12.9219 13.7155C13.3141 13.3296 13.5543 12.9419 13.7347 12.4853C13.9089 12.0439 14.0284 11.539 14.062 10.7997C14.0962 10.0587 14.1041 9.82252 14.1041 7.93663C14.1041 6.05074 14.0962 5.81402 14.062 5.07358C14.0278 4.33424 13.9089 3.82913 13.7347 3.38797C13.5543 2.93135 13.3135 2.5443 12.9219 2.1578C12.5304 1.7713 12.137 1.53408 11.6743 1.3568C11.2258 1.18513 10.7135 1.06735 9.96388 1.03424C9.21256 1.00058 8.97236 0.992188 7.05876 0.992188C5.14516 0.992188 4.90479 1.00002 4.15307 1.03424Z" fill="currentColor"/>
                                </svg>
                                
                        </a>
                        <a href="javascript:;"  class="w-9 h-9 rounded-full bg-gray-700 flex justify-center items-center hover:bg-indigo-600">
                            <svg class="w-[1rem] h-[1rem] text-white" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.8794 11.5527V3.86835H0.318893V11.5527H2.87967H2.8794ZM1.59968 2.81936C2.4924 2.81936 3.04817 2.2293 3.04817 1.49188C3.03146 0.737661 2.4924 0.164062 1.61666 0.164062C0.74032 0.164062 0.167969 0.737661 0.167969 1.49181C0.167969 2.22923 0.723543 2.8193 1.5829 2.8193H1.59948L1.59968 2.81936ZM4.29668 11.5527H6.85698V7.26187C6.85698 7.03251 6.87369 6.80255 6.94134 6.63873C7.12635 6.17968 7.54764 5.70449 8.25514 5.70449C9.18141 5.70449 9.55217 6.4091 9.55217 7.44222V11.5527H12.1124V7.14672C12.1124 4.78652 10.8494 3.68819 9.16483 3.68819C7.78372 3.68819 7.17715 4.45822 6.84014 4.98267H6.85718V3.86862H4.29681C4.33023 4.5895 4.29661 11.553 4.29661 11.553L4.29668 11.5527Z" fill="currentColor"/>
                                </svg>
                                
                        </a>
                        <a href="javascript:;"  class="w-9 h-9 rounded-full bg-gray-700 flex justify-center items-center hover:bg-indigo-600">
                            <svg class="w-[1.25rem] h-[0.875rem] text-white" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M13.9346 1.13529C14.5684 1.30645 15.0665 1.80588 15.2349 2.43896C15.5413 3.58788 15.5413 5.98654 15.5413 5.98654C15.5413 5.98654 15.5413 8.3852 15.2349 9.53412C15.0642 10.1695 14.5661 10.669 13.9346 10.8378C12.7886 11.1449 8.19058 11.1449 8.19058 11.1449C8.19058 11.1449 3.59491 11.1449 2.44657 10.8378C1.81277 10.6666 1.31461 10.1672 1.14622 9.53412C0.839844 8.3852 0.839844 5.98654 0.839844 5.98654C0.839844 5.98654 0.839844 3.58788 1.14622 2.43896C1.31695 1.80353 1.81511 1.30411 2.44657 1.13529C3.59491 0.828125 8.19058 0.828125 8.19058 0.828125C8.19058 0.828125 12.7886 0.828125 13.9346 1.13529ZM10.541 5.98654L6.72178 8.19762V3.77545L10.541 5.98654Z" fill="currentColor"/>
                                </svg>
                                
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

<style>
    .expanded-content {
        flex-direction: column;
        justify-content: end;
        height: 100%;
    }

    .overlay {
        z-index: 1;
        opacity: 1;
    }
</style>
<script>
    // ✅ Updated initCardAnimation to hide ALL .card-content blocks
    function initCardAnimation(card, options = {}) {
        const {
            clipOrigin = "85% 10px",
            overlayColor = "#ff4757",
            zIndex = "10"
        } = options;

        const overlay = card.querySelector('.overlay');
        const cardContents = card.querySelectorAll('.card-content'); // ⬅ all content blocks
        let expandedContent = card.querySelector('.expanded-content');
        if (card.dataset.link) {
            card.style.cursor = 'pointer';
            card.addEventListener('click', () => {
                window.location.href = card.dataset.link;
            });
        }

        if (!expandedContent) {
            expandedContent = document.createElement('div');
            expandedContent.className = 'expanded-content relative z-30 ';
            const titleText = card.dataset.title || "More details here";
            const descriptionText = card.dataset.description || "More details here";
            expandedContent.innerHTML =
                `<p class="text-2xl text-gray-200">${titleText}</p><p class="text-lg text-gray-200">${descriptionText}</p>`;
            card.appendChild(expandedContent);
        }

        if (overlay) overlay.style.background = overlayColor;

        // animate when card enter the view
        // gsap.fromTo(card,{opacity:0,y:12},{opacity:1,y:0,duration:0.6,ease:'power3.out',scrollTrigger:{trigger:card,start:'center 80%'}});

        gsap.set(overlay, {
            clipPath: `circle(0% at ${clipOrigin})`
        });
        gsap.set(expandedContent, {
            opacity: 0,
            y: 20,
            display: "none"
        });

        // Hover In
        const hoverInTl = gsap.timeline({
            paused: true
        });
        hoverInTl
            .to(cardContents, {
                duration: 0.01,
                opacity: 0,
                display: "none",
                y: -10,
                ease: "power2.out",
                stagger: 0.1
            },)
            .to(overlay, {
                duration: 0.8,
                clipPath: `circle(150% at ${clipOrigin})`,
                ease: "ease.out"
            })

            .to(expandedContent, {
                duration: 0.4,
                opacity: 1,
                display: 'flex',
                y: 0,
                ease: "power2.out"
            }, "-=0.4"); // Start expanded content earlier to sync with arrow        // Hover Out
        const hoverOutTl = gsap.timeline({
            paused: true
        });
        hoverOutTl
            .to(expandedContent, {
                duration: 0.3,
                opacity: 0,
                display: "none",
                y: 20,
                ease: "power2.in"
            })
            .to(overlay, {
                duration: 0.9,
                clipPath: `circle(0% at ${clipOrigin})`,
                ease: "power2.in"
            },
                "-=0.1")
            .to(cardContents, {
                duration: 0.3,
                opacity: 1,
                y: 0,
                display: "flex",
                ease: "power2.out",
                stagger: 0.1
            }, "-=0.3")


        // Synchronize arrow animation into the same timeline and add running-flag queueing
        // Arrow element (if exists) - we'll animate using transform:scale for better performance
        const arrowEl = card.querySelector('.card-arrow img');
        if (arrowEl) {
            // ensure transform origin and smoothing
            arrowEl.style.transformOrigin = '50% 50%';
            arrowEl.style.willChange = 'transform';
            // set an initial scale (1) in case CSS isn't explicit
            gsap.set(arrowEl, {
                scale: 1
            });
        }

        // Add running flag callbacks to hoverIn timeline
        hoverInTl.eventCallback('onStart', () => {
            card.dataset.animationRunning = 'true';
            card.__shouldReverse = false; // clear queued reverse when starting forward
        });
        hoverInTl.eventCallback('onComplete', () => {
            card.dataset.animationRunning = 'false';
            // If a reverse was requested while the forward animation ran, start it now
            if (card.__shouldReverse) {
                hoverOutTl.restart();
                card.__shouldReverse = false;
            }
        });
        // alert(isMobile ? "Mobile View" : "Desktop View");
        // Integrate arrow grow into hoverIn timeline (synchronized with expanded content)
        if (arrowEl) {
            console.log(isMobile ? "Mobile View" : "Desktop View");
            hoverInTl.to(arrowEl, {
                duration: 0.4,
                width: (isMobile ? 100 : 300),
                height: (isMobile ? 100 : 300),
                opacity: 0.7,
                ease: 'power2.out'
            }, '-=0.4'); // Sync with expanded content timing
        }

        // Add running-flag callbacks to hoverOut timeline
        hoverOutTl.eventCallback('onStart', () => {
            card.dataset.animationRunning = 'true';
        });
        hoverOutTl.eventCallback('onComplete', () => {
            card.dataset.animationRunning = 'false';
        });

        // Integrate arrow shrink into hoverOut timeline (shrink early so overlay collapse looks natural)
        if (arrowEl) {
            hoverOutTl.to(arrowEl, {
                duration: 0.3,
                width: 40,
                height: 40,
                opacity: 1,
                ease: 'power2.in'
            }, '-=0.6');
        }

        // Mouse handlers now respect the running flag and queue reverses when necessary
        card.addEventListener('mouseenter', () => {
            hoverOutTl.pause();
            hoverInTl.restart();
            gsap.to(card, {
                duration: 0.3,
                scale: 1,
                ease: 'power2.out'
            });
        });

        card.addEventListener('mouseleave', () => {
            // If the forward animation is still running, mark for reverse and return
            if (card.dataset.animationRunning === 'true') {
                card.__shouldReverse = true;
                return;
            }
            hoverInTl.pause();
            hoverOutTl.restart();
            gsap.to(card, {
                duration: 0.3,
                scale: 1,
                ease: 'power2.out'
            });
        });
    }

    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".card").forEach((card, i) => {
            // Determine color from data-color attribute or fall back to defaults
            const cardColor = card.getAttribute('data-color') || (i === 0 ? '#4B5D53' : '#34413A');
            // Add arrow button if not already present
            if (!card.querySelector('.card-arrow')) {
                const arrowWrapper = document.createElement('p');
                arrowWrapper.className =
                    'card-arrow z-20 flex p-1.5 items-center rounded-full backdrop-blur-[20px] top-[10px] right-[10px] absolute w-fit';
                // set the background color from data-color
                arrowWrapper.style.background = cardColor;
                arrowWrapper.innerHTML =
                    `<?php echo "<img src=\"" . get_stylesheet_directory_uri() . "/assets/images/arrow-up.svg\" alt=\"Arrow Icon\" width=\"40\" height=\"40\" />"; ?>`;
                // Place the arrow wrapper into a sensible spot: append to the first .card-content or to the card itself
                const firstContent = card.querySelector('.card-content');
                if (firstContent) {
                    const targetParent = firstContent.parentElement || card;
                    targetParent.appendChild(arrowWrapper);
                } else card.appendChild(arrowWrapper);
            }



            // Pass the resolved color to the animation init
            initCardAnimation(card, {
                overlayColor: card.getAttribute('data-color') || (i === 0 ? "#4B5D53" :
                    "#34413A"),
                clipOrigin: "95.2% 25px"
            });

            // Inject decorative SVG if missing
            if (!card.querySelector('.card-deco-svg')) {
                // ensure card is positioned for absolute children
                const currentPos = window.getComputedStyle(card).position;
                if (currentPos === 'static' || !currentPos) card.style.position = 'relative';

                const svgWrapper = document.createElement('div');
                svgWrapper.className = 'card-deco-svg absolute z-0 pointer-events-none';
                svgWrapper.style.position = 'absolute';
                svgWrapper.style.top = '-2px';
                svgWrapper.style.right = '-1px';
                svgWrapper.style.width = '100px';
                svgWrapper.style.height = '100px';
                svgWrapper.style.zIndex = '0';
                svgWrapper.innerHTML = `
    <svg width="101" height="99" viewBox="0 0 101 99" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M0.5 -0.000488281L101 0V98.9995H99.5L99.2484 97.4901C98.7527 94.5158 97.7808 91.6409 96.3699 88.9761L95.626 87.5708C94.5507 85.5397 93.1203 83.7176 91.4026 82.1908C90.1397 81.0681 88.7344 80.1167 87.2231 79.3611L84.6796 78.0893C83.232 77.3655 81.7011 76.822 80.1212 76.4709C78.7113 76.1576 77.2714 75.9995 75.8271 75.9995H57L54.6165 75.7191C50.5548 75.2413 46.5689 74.2568 42.7518 72.7887L42 72.4995L37.5 69.9995L35.3909 68.4177C34.1319 67.4734 32.9415 66.441 31.8287 65.3282C30.28 63.7795 28.8881 62.0817 27.6732 60.2594L26.5 58.4995C25.5021 56.8363 24.6574 55.0858 23.9763 53.2697L23.5 51.9995L22.5 48.4995L22.0698 45.7031C21.6905 43.2376 21.5 40.7468 21.5 38.2523V27.9763C21.5 15.4492 12.749 4.6243 0.5 1.99951V-0.000488281Z" fill="white"/>
    </svg>
    
          `;
                card.appendChild(svgWrapper);
            }

            // NOTE: arrow grow/shrink animations moved into the main hover timelines above.
            // We still ensure the arrow wrapper exists and has sensible positioning if present.
            const arrow = card.querySelector('.card-arrow img');
            if (arrow) {
                const wrapper = card.querySelector('.card-arrow');
                if (wrapper) {
                    wrapper.style.position = wrapper.style.position || 'absolute';
                    wrapper.style.zIndex = wrapper.style.zIndex || '20';
                }
            }
        });
    });
</script>

<!-- Inline custom card cursor (pointer-aware) -->
<style>
    /* only hide native cursor when JS enables the custom cursor on fine-pointer devices */
    .has-custom-cursor .card {
        cursor: none !important;
    }

    .cursor-icon {
        position: absolute;
        width: 80px;
        height: 80px;
        pointer-events: none;
        border-radius: 50px;
        transform: translate(-50%, -50%);
        opacity: 0;
        transition: opacity 0.18s ease, transform 0.08s linear;
        z-index: 9999;
        will-change: transform, opacity;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        padding: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .card-icon {
        display: none;
        /* position:  fixed; */
        top: 0;
    }



    .cursor-icon-svg {
        width: 40px;
        height: 40px;
        display: block;

        /* ensure it scales nicely */
        /* object-fit: contain; */
    }
</style>

<script>
    (function () {
        // Only enable on devices with a fine pointer (desktop mouse)
        if (!window.matchMedia || !window.matchMedia('(pointer: fine)').matches) return;

        document.documentElement.classList.add('has-custom-cursor');

        const cards = Array.from(document.querySelectorAll('.card'));
        if (!cards.length) return;

        cards.forEach(card => {
            // create icon if not present
            let icon = card.querySelector('.cursor-icon');
            if (!icon) {
                icon = document.createElement('div');
                icon.className = 'cursor-icon';
                card.appendChild(icon);
                // If the card has a `.card-icon` SVG, clone the actual <svg> into the cursor so it fits nicely
                const cardIconEl = card.querySelector('.card-icon');
                if (cardIconEl) {
                    // prefer the inner svg node if wrapper exists
                    const svgNode = (cardIconEl.tagName && cardIconEl.tagName.toLowerCase() === 'svg') ?
                        cardIconEl : cardIconEl.querySelector('svg');
                    if (svgNode) {
                        // deep clone the SVG element itself
                        const clonedSvg = svgNode.cloneNode(true);
                        // remove any id attributes inside the cloned SVG to avoid collisions
                        clonedSvg.querySelectorAll('[id]').forEach(n => n.removeAttribute('id'));
                        // normalize sizing so CSS can scale it to the cursor container
                        clonedSvg.setAttribute('width', '100%');
                        clonedSvg.setAttribute('height', '100%');
                        clonedSvg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
                        // Add a helper class and ensure it doesn't capture pointer events
                        clonedSvg.classList.add('cursor-icon-svg');
                        clonedSvg.style.pointerEvents = 'none';
                        // Clear previous contents and append the cloned svg
                        icon.innerHTML = '';
                        icon.appendChild(clonedSvg);
                        // Make the cursor background transparent when SVG present
                        icon.style.background = 'transparent';
                    }
                }
                // ensure the card is positioned for absolute children
                const pos = window.getComputedStyle(card).position;
                if (pos === 'static' || !pos) card.style.position = 'relative';
            }

            let rafId = null;
            let lastX = 0,
                lastY = 0;
            let visible = false;

            function update() {
                // use translate3d for GPU acceleration; keep centering offset
                icon.style.transform = `translate3d(${lastX}px, ${lastY}px, 0) translate(-50%,-50%)`;
                rafId = null;
            }

            function show() {
                if (!visible) {
                    visible = true;
                    icon.style.opacity = '1';
                }
            }

            function hide() {
                if (visible) {
                    visible = false;
                    icon.style.opacity = '0';
                }
            }

            function onPointerMove(e) {
                const rect = card.getBoundingClientRect();
                lastX = e.clientX - rect.left;
                lastY = e.clientY - rect.top;
                if (!rafId) rafId = requestAnimationFrame(update);
            }

            function onPointerEnter(e) {
                onPointerMove(e);
                show();
            }

            function onPointerLeave() {
                hide();
                if (rafId) {
                    cancelAnimationFrame(rafId);
                    rafId = null;
                }
            }

            // pointer events unify mouse/stylus; we early-return on touch devices above
            card.addEventListener('pointermove', onPointerMove);
            card.addEventListener('pointerenter', onPointerEnter);
            card.addEventListener('pointerleave', onPointerLeave);

            // Keep keyboard focus accessible: hide custom cursor while focusing interactive elements
            card.addEventListener('focusin', hide);
            card.addEventListener('focusout', () => {
                // no-op; pointer events will show again when pointer enters
            });

        });
    })();
</script>